function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var changedRowCount=!1;function updateMemoCounter(e,t){var n=t.nextAll(".memocharcount"),i=parseInt(t.attr("maxlength"),10),a=.8*i,t=t.val().length;isNaN(i)||t<a?n.hide():isNaN(i)||(a=t+" / "+i,n.is(":hidden")&&n.show().css("display","inline"),a!=n.text()&&n.addClass("bold text-error").text(a),n.toggleClass("limit-reached",t>=max_faddlimit))}function bindMemocounterEvents(e){e.change(function(e){updateMemoCounter(e,$(this))}).keyup(function(e){updateMemoCounter(e,$(this))}).on("cut paste",function(e){updateMemoCounter(e,$(this))})}function leaveconfirmCustomNeedConfirm(){return!!changedRowCount||null}function makeHelpTextTooltips(e,t){var n,i,e=$(e),a=e.data("helptext"),o=e.data("helptitle");t=t||!1,a&&(i=$('<a class="vismaicon vismaicon-sm vismaicon-filled vismaicon-help helptext-opener"></a>'),o&&i.css("float","right"),e.is("th")||e.is("td")?e.append(i):e.find("label").length&&e.find("label").first().after(i),t||(a=a.replace(/(<br>)/g,"\r\n"),n=(n=escapehtml(a)).replace(/(\r\n|\n|\r)/g,"<br>")),i.popover({title:o,content:t?a:n,html:!0,trigger:"click",placement:"auto",container:"body"}),0<i.parents(".sidepanel").length)&&i.on("show.bs.popover",function(){var e=$(this).data("bs.popover");e&&0<e.$tip.length&&e.$tip.css("z-index",9995)})}function fillDiaryFromParams(){var e=getUrlVars();if(e.date&&e.start&&e.end){var t=e.start.replace(":","."),n=e.end.replace(":","."),i=e.date,e=new Date,a=("0"===i[0]&&(i=i.slice(1)),!0),o=$('input[id$="pfield310"]'),r=$('input[id$="pfield317"]'),l=(void 0===r[0]&&(a=!1),$('input[id$="pfield318"]')),d=!0,s=!1,u=0,p=$('input[id^="f-prepeater310-1"]');if(o[0].value===e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear()){for(var f=!0,u=0;u<p.length;u++)if(""!==p[u].value&&"f-prepeater310-1-pfield313"!==p[u].id&&"f-prepeater310-1-pfield310"!==p[u].id){f=!1;break}f&&(o[0].value=i)}for(u=0;u<o.length;u++)if(o[u].value===i)if(a){if(r[u].value===t&&l[u].value===n){d=!1;break}if(""===r[u].value&&""===l[u].value){d=!(s=!0);break}}else d=!1;d?($("#f-prepeater310__add").trigger("click"),$('input[id$="pfield310"]')[0].value=i,a&&(r=$('input[id$="pfield317"]'),l=$('input[id$="pfield318"]'),r[0].value=t,l[0].value=n)):s&&(r[u].value=t,l[u].value=n)}}!function(){var i=/^f-(.+)__add$/,a=/^f-(.+)-(\d+)__remove$/,o=/^-(\d+)([-_].*)$/,r={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15},n={};function l(e,t){return $_("f-"+e+"__"+t)}function s(e,t){e=l(e,t);return e?parseInt(e.value,10):null}function u(e,t,n){var i=l(e,t);if(!i)throw new Error("Data field not found: "+e+", "+t);i.value=String(n)}function p(e,t){for(t=t.toUpperCase();e;){if(e.tagName&&e.tagName.toUpperCase()===t)return e;e=e.parentNode}return null}function f(e){var t;return Object.prototype.hasOwnProperty.call(n,e)||(t=l(e,"model"),n[e]=t?function(e){var t=r,n=[],i=2;0<e.length&&(i=parseInt(e.charAt(0)));for(var a=1;a<e.length;a+=i)4==i?n.push((t[e.charAt(a)]<<12)+(t[e.charAt(a+1)]<<8)+(t[e.charAt(a+2)]<<4)+t[e.charAt(a+3)]):2==i&&n.push((t[e.charAt(a)]<<4)+t[e.charAt(a+1)]);return String.fromCharCode.apply(String,n)}(t.value):""),n[e]}function d(e,t,n,i,a){e.substr(0,t.length)===t&&e.substr(t.length,n.length)===n&&(e=e.substr(t.length+n.length).match(o))&&0<(i=i(parseInt(e[1],10)))&&a(t+n+"-"+i+e[2])}function c(e,t,n){for(var i=e.getElementsByTagName("*"),a=0;a<i.length;a++){var o=i[a];o.id&&d(o.id,"f-",t,n,function(e){o.id=e}),o.name&&d(o.name,"",t,n,function(e){o.name=e}),o.className&&!function(e,t,n){for(var i=e.className.split(" "),a=!1,o=0;o<i.length;o++)d(i[o],"",t,n,function(e){i[o]=e,a=!0});a&&(e.className=i.join(" "))}(o,t,n)}}function h(i){var a;0!==i.length&&"1"!==i.data("header-count-fixed")&&0<(a=i.find("tbody").find("tr:eq(0)").find("td").length)&&i.find("thead").find("tr").each(function(){var e,t=$(this),n=t.find("td[colspan]");if(1===n.length&&anyToNumber(n.attr("colspan"),0)!==a)n.attr("colspan",a);else if(anyToNumber(n.attr("colspan"),0)!==a)if((n=t.find("th")).length<a){for(e=0;e<a-n.length;e++)t.append($("<th>&nbsp;</th>"));i.data("header-count-fixed","1")}else if(n.length>a){for(e=0;e<n.length-a;e++)t.last("th").remove();i.data("header-count-fixed","1")}})}function m(e){var e=(e=e instanceof jQuery?e:$(e)).closest("table"),t=$("tbody> tr",e).length,n=parseInt(e.attr("data-maxrows"),10);0<n&&n<=t?(e.find("tfoot").find("button").hide(),e.find("div.alert").show()):(e.find("tfoot").find("button").show(),e.find("div.alert").hide())}function v(e,t){var n,i,a=f(t),o=p(e,"TABLE"),r=function(e,t){if(t=t.toUpperCase(),e)for(e=e.firstChild;e;){if(e.tagName&&e.tagName.toUpperCase()===t)return e;e=e.nextSibling}return null}(o,"TBODY"),l=s(t,"count"),d=s(t,"excount");if(!a||!r||null===l||null===d)throw new Error("Required element missing");n=(d<l?l:d)+1,(d=document.createElement("div")).innerHTML="<table><tbody><tr>"+a+"</tr></tbody></table>",c(d,t,function(e){return n}),a=$(d.getElementsByTagName("tr")[0]),hasClass(o,"repeater-reverse")?r.insertBefore(a[0],firstChild(r)):(r.appendChild(a[0]),a.find("INPUT.field-check").blur($.proxy(FieldCheck.checkFields,FieldCheck)).focus(function(){$(this).removeClass("invalid-value")})),m(e),changedRowCount=!0,i=a.children().length,$(o).find("> thead > tr").children().length<i&&($(o).find("> thead > tr").append("<th />"),$(r).children("tr").each(function(e){var t=$(this);t.children().length<i&&t.append("<td />"),0===e&&t.children().last().css("width",5)})),0<(d=a.find(".slider-field")).length&&g(d),(autocompleteCustomViewInputs=a.find(".autocomplete.custom-view")).length&&window.app&&window.app.view&&window.app.view.extender&&window.app.view.extender.initFormGroupDaycareSelector(autocompleteCustomViewInputs.first().closest(".form-group")),$("#early-edu-filtering").length&&window.app&&window.app.view&&(e=$(a).closest(".form-group").find("INPUT:first"),window.app.view.reIniterFields)&&e.attr("id")in window.app.view.reIniterFields&&window.app.view.init(window.app.view.lastInjectionUsed||null,!0,!0),a.find("select").each(function(){wrapSelect($(this))}),a.find(".date").wilmaDatepick(),u(t,"count",l+1),(r=a.find("textarea")).each(function(){"object"==("undefined"==typeof memoswitch?"undefined":_typeof(memoswitch))&&memoswitch.handleNewRows()}),bindMemocounterEvents(r),h($(o))}function w(e,t,n){var e=p(e,"TR"),i=p(e,"TBODY"),a=l(t,"removed"),o=s(t,"count"),r=s(t,"excount");if(!e||!i||!a||null==o||null==r)throw new Error("Required element missing");e.parentNode.removeChild(e),changedRowCount=!0,r<n?(c(i,t,function(e){return n<e?e-1:-1}),u(t,"count",o-1)):(function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return;e.push(t)}(e=function(e){for(var t=[],n=e.split(","),i=0;i<n.length;i++)t.push(parseInt(n[i],10));return t}(a.value),n),a.value=e.join(",")),$("#early-edu-filtering").length&&window.app&&window.app.view&&window.app.view&&(r=$(i).find("INPUT:first"),window.app.view.reIniterFields)&&r.attr("id")in window.app.view.reIniterFields&&window.app.view.init(window.app.view.lastInjectionUsed||null,!0,!0),y()}function g(e){var t=e.data("max")||0,n=(e.data("min"),e.data("warning")),i=void 0!==e.data("value")?e.data("value"):null,a=e.siblings("label"),o=e.is(".disabled"),t={allowNullValue:!0,ariaLabel:a.text(),nullValueTooltipText:"-",min:e.data("min"),max:t,name:e.data("name"),value:0<=i&&""!==i?i:null,label:{show:!1},tooltip:{show:!o},disabled:o};a.attr({"aria-hidden":!0,for:""}),n&&(a.addClass("display-block"),$("<a />").attr({href:"",title:n}).addClass("pull-right").on("click",preventDefault).append($('<span class="vismaicon vismaicon-filled vismaicon-sm vismaicon-warning" aria-hidden="true"></span>')).appendTo(a).tooltip(),e.addClass("warning"),t.onSlide=b,t.onChange=b),e.get(0).wilmaSlider=new WilmaSlider(e,t)}function b(e){e=$(e.target).parents(".slider-field.warning");0<e.length&&(e.siblings("label").children("a").tooltip("hide").remove(),e.removeClass("warning"))}function y(){$("table").after(function(){var e=$(this).find("tfoot").find("button");e.length&&m(e)})}function e(){$(document).on("click",function(e){var t,n;t=(e=e).target||e.srcElement,"button"!=(n="span"==(n=t?t.tagName.toLowerCase():"")?(t=t.parentNode?t.parentNode:t).tagName.toLowerCase():n)&&"input"!=n||((n=t.id.match(i))&&!t.disabled?(v(t,n[1]),preventDefault(e)):(n=t.id.match(a))&&(w(t,n[1],parseInt(n[2],10)),preventDefault(e)))}),fillDiaryFromParams(),$(".slider-field").each(function(){g($(this))}),h($("table.memoswitch")),y()}$(function(){e()})}(),$.valHooks.textarea={get:function(e){return e.value.replace(/\r?\n/g,"\r\n")}},$(function(){var e=$("textarea");bindMemocounterEvents(e),e.each(function(){updateMemoCounter({},$(this))}),$(".has-helptext").each(function(){makeHelpTextTooltips(this,$(this).hasClass("allow-unsafe"))})}),window.autoTemplateHelpTextTooltip=makeHelpTextTooltips;